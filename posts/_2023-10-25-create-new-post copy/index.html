<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

<meta charset="utf-8" />
<meta name="generator" content="quarto-1.3.433" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

<meta name="author" content="João Silva" />
<meta name="dcterms.date" content="2023-11-29" />
<meta name="description" content="Tutorial how to create a new post on a quarto blog" />

<title>Create a new blog post</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<!-- htmldependencies:E3FAD763 -->
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async src="https://hypothes.is/embed.js"></script>


<link rel="stylesheet" href="../../styles.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" />
<link rel="stylesheet" href="https://ipese-web.epfl.ch/static/css/actionButtons.css" />
</head>

<body>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="/index.html" class="navbar-brand navbar-brand-logo">
    <img src="/resources/images/logo.webp" alt="" class="navbar-logo" />
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
  aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"
  onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="/index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="/about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div id="quarto-toc-target"></div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" ></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Create a new blog post</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Tutorial</div>
  </div>
  </div>

<div>
  <div class="description">
    Tutorial how to create a new post on a quarto blog
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>João Silva </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 29, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>
<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#create-a-new-blog-post" id="toc-create-a-new-blog-post">Create a new blog post</a>
  <ul>
  <li><a href="#setup-development-environment" id="toc-setup-development-environment">Setup development environment</a></li>
  <li><a href="#before-writing" id="toc-before-writing">Before writing</a>
  <ul>
  <li><a href="#create-new-folder" id="toc-create-new-folder">Create new folder</a></li>
  <li><a href="#define-the-list-of-authors" id="toc-define-the-list-of-authors">Define the list of authors</a></li>
  <li><a href="#edit-the-configurations" id="toc-edit-the-configurations">Edit the configurations</a></li>
  <li><a href="#add-categories" id="toc-add-categories">Add categories</a></li>
  <li><a href="#unlisted-posts-and-includes" id="toc-unlisted-posts-and-includes">Unlisted posts and includes</a></li>
  <li><a href="#available-scripts" id="toc-available-scripts">Available scripts</a></li>
  </ul></li>
  <li><a href="#write-in-markdown" id="toc-write-in-markdown">Write in Markdown</a></li>
  <li><a href="#what-about-code-chunks" id="toc-what-about-code-chunks">What about code chunks?</a></li>
  <li><a href="#deploy-the-changes" id="toc-deploy-the-changes">Deploy the changes</a>
  <ul>
  <li><a href="#vscode" id="toc-vscode">VSCode</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
<script src="../../resources/scripts/editButton.js"></script>
<section id="create-a-new-blog-post" class="level1">
<h1>Create a new blog post</h1>
<p>This document presents how to publish blog post in the <a href="https://github.com/IPESE/climact-blog">Climact blog</a>.</p>
<p>You can add posts to this Quarto blog in any of the menus on the navbar. Blog articles are written in Quarto, which is similar to Markdown. You can also run R or Python code chunks in your posts, import .bib files, and use many other features.</p>
<section id="setup-development-environment" class="level2">
<h2>Setup development environment</h2>
<p><strong>Install quarto extension and connect with zotero API</strong></p>
<ol type="1">
<li>If not yet installed, install VS Code as this is the tool we are going to use for most projects</li>
<li>In VS Code install the quarto extension</li>
<li>Go to zotero.org and log in your account</li>
<li>In your account go to settings and then Feeds/API</li>
<li>Here you can create a new API key with a name of your choice</li>
<li>Copy the new API and save it because you won’t be able to access it again once you leave the page</li>
<li>Access your settings (⌘,) and look for zotero in the search bar</li>
<li>In the Zotero: Library choose web and you’ll be prompted to add your API key</li>
<li>In Group Libraries click on Add Item and write the group name and ok</li>
<li>You can now edit in visual mode by clicking the 3 dots on the top right or ⌘⇧P and enter Visual Mode
<ul>
<li>By clicking in insert and Citation, you can see a list of citations available</li>
<li>When adding a citation it will automatically add the information on a bib file, the reference to you yaml header and the citation where your text cursor is located</li>
</ul></li>
</ol>
<p><strong>Other extensions you might add:</strong></p>
<ul>
<li><code>Live Share</code> by Microsoft allows you to create a link and allow collaborative editing with others with whom you share it with.
<ul>
<li>Other users can open the link and use wbe version or open in VSCode, connect their account or simply choose a user name.</li>
<li>After that, you (the person who created the link) need to accept the new user as an Edit or a read-only user.</li>
</ul></li>
<li><code>Draw.io integration</code> by Henning Dieterichs to edit drawio files
<ul>
<li>Simply create a new <code>.drawio</code> file or open an existing one and it will open an interface that allows you to edit the diagram.</li>
</ul></li>
<li><code>Edit csv</code> by janisdd to edit csv files
<ul>
<li>Create or open a <code>.csv</code> and click on “Edit csv” on the top right.</li>
</ul></li>
<li><code>Excel Viewer</code> by GrapeCity to edit xlsx files
<ul>
<li>Open an <code>.xlsx</code> and you’ll be able to edit your content in a simplified graphical interface</li>
</ul></li>
<li><code>vscode-pdf</code> by tomoki1207 to visualise pdf in vs code.
<ul>
<li>This allows you to view pdf files in VSCode, which is impossible otherwise.</li>
</ul></li>
<li><code>vscode-pydata-viewer</code> by Percy to view pickl files
<ul>
<li>This uses your pandas installation to display data and it needs to by version &lt; 2.0</li>
</ul></li>
<li><code>GPT</code> by Silas Nevstad to use GPT in vs code <em>(need for an API key)</em></li>
</ul>
</section>
<section id="before-writing" class="level2">
<h2>Before writing</h2>
<p>Before you start writing, you need to create your folder and edit some settings and options.</p>
<section id="create-new-folder" class="level3">
<h3>Create new folder</h3>
<p>To create a new blog post, simply copy the <a href="https://github.com/IPESE/climact-blog/edit/main/_template/index.qmd">_template</a> folder and paste it into the folder for the submenu where you want your post to be. For the moment only the <code>posts</code> directory is availbale for post on the “Home” menu.</p>
<p>You’ll need to rename the folder with a name that doesn’t start with <code>_</code> and doesn’t contain <code>"</code> or <code>'</code>.</p>
<p>To have a naming convention in place, you should name the folder with a name like this: yyyy-mm-dd-title-of-your-post.</p>
</section>
<section id="define-the-list-of-authors" class="level3">
<h3>Define the list of authors</h3>
<p>The list of authors will be used internally as todo. In any of the menus you can filter the posts by title and author by simply writing it in the Filter input.</p>
</section>
<section id="edit-the-configurations" class="level3">
<h3>Edit the configurations</h3>
<p>Next, edit the YAML header of your index.qmd file to add a title, author name, date, description, and image. The other elements in the header, such as comments, toc, and format, can be left as is.</p>
<ul>
<li>The other elements are:
<ul>
<li><code>comments</code>: in our sample, are turned on with hypothesis</li>
<li><code>toc</code>: or table of contents that is used to display the titles on the side of the article (here on the left and with 3 level of titles expanded)</li>
<li><code>format</code>: other info for the rendering process, code-copy: true will display the code chunks with echo=T with a button to copy to clipboard</li>
</ul></li>
</ul>
</section>
<section id="add-categories" class="level3">
<h3>Add categories</h3>
<p>Under <code>categories:</code> add the ones related to your post. These are the categories already used in the blog :</p>
<div class="categories-list">

</div>
<p>You should use these categories as much as possible instead of creating new ones. Although, this list is updated every time you render the website.</p>
</section>
<section id="unlisted-posts-and-includes" class="level3">
<h3>Unlisted posts and includes</h3>
<p>Every qmd in your folder is rendered as a post by default. To create posts that are not listed you can add <code>hidden:true</code> or <code>draft:true</code>in the yaml of the header. You can still reference this post by creating a link with its path and replacing <code>.qmd</code>by <code>.html</code> The difference between hidden and draft is that hidden is hidden by the parameters of the listing and draft is hidden by the main quarto framework.</p>
<p>You can also make one post with multiple .qmd files. For this you can either use the <code>hidden:true</code>in the secondary file or start it’s name with <code>_</code> you can then include your file like this:</p>
<div class="cell">
<pre class="text cell-code"><code>{{&lt; include _partialfile.qmd &gt;}}</code></pre>
</div>
<p>If you name a file starting withh <code>_</code>, and don’t reference it in an include, it won’t be rendered.</p>
<p><code>hidden:true</code> works in all cases for this blog.</p>
</section>
<section id="available-scripts" class="level3">
<h3>Available scripts</h3>
<p>You can add the following lines to import some extra functionalities in your post:</p>
<ul>
<li>To add an edit button that opens your article in the GitHub IDE and a pdf button that opens the pdf format of your post.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="sourceCode html cell-code"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;../../resources/scripts/editButton.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span></code></pre></div>
</div>
<p>For your information, these scripts are also available to add in the _quarto.yml post-render section that will add functionalities to the whole blog:</p>
<ul>
<li>To retrieve all the categories used in the blog and add the list in every div of class categories-list</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="sourceCode yml cell-code"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">post-render</span><span class="kw">:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> ./resources/scripts/getCategories.py</span></span></code></pre></div>
</div>
</section>
</section>
<section id="write-in-markdown" class="level2">
<h2>Write in Markdown</h2>
<p>You can add titles by starting the line with # like this:</p>
<pre><code># Main title
## Secondary title
### Tertiary title</code></pre>
<p>You can then add multiple types of data like</p>
<ol type="1">
<li><p>Text</p></li>
<li><p>Link to a website</p>
<ul>
<li><code>[link to a website](https://www.google.com)</code></li>
<li><a href="https://www.google.com">link to a website</a></li>
</ul></li>
<li><p>Link to another qmd file</p>
<ul>
<li><code>[another file of this post](otherfile.html)</code></li>
<li><a href="otherfile.html">another file of this post</a></li>
</ul></li>
<li><p>Bold text</p>
<ul>
<li><code>**bold**</code></li>
<li><strong>bold</strong></li>
</ul></li>
<li><p>Italic text</p>
<ul>
<li><code>*bold*</code></li>
<li><em>bold</em></li>
</ul></li>
<li><p>Bold and italic text</p>
<ul>
<li><code>***bold***</code></li>
<li><strong><em>bold</em></strong></li>
</ul></li>
<li><p>Unordered list:</p>
<ul>
<li>Main point
<ul>
<li>secondary point</li>
</ul></li>
</ul></li>
<li><p>Ordered list:</p>
<ol type="1">
<li>Main point
<ol type="i">
<li>secondary point</li>
</ol></li>
</ol></li>
<li><p>Tables are also possible:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Aligned to the left</th>
<th style="text-align: center;">Centered col</th>
<th style="text-align: right;">Align to right</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Content</td>
<td style="text-align: center;">Content</td>
<td style="text-align: right;">Content</td>
</tr>
<tr class="even">
<td style="text-align: left;">Content</td>
<td style="text-align: center;">Content</td>
<td style="text-align: right;">Content</td>
</tr>
</tbody>
</table></li>
</ol>
</section>
<section id="what-about-code-chunks" class="level2">
<h2>What about code chunks?</h2>
<p>You can also run or display code chunks like this:</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;reticulate&#39;</span>))</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">install.packages</span>(<span class="st">&quot;reticulate&quot;</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: reticulate</code></pre>
</div>
</div>
<p>Options available for customizing output include:</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Option</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>eval</strong></td>
<td style="text-align: left;">Evaluate the code chunk (if false, just echos the code into the output).</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>echo</strong></td>
<td style="text-align: left;">Include the source code in output</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>output</strong></td>
<td style="text-align: left;">Include the results of executing the code in the output (true, false, or asis to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown).</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>warning</strong></td>
<td style="text-align: left;">Include warnings in the output.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>error</strong></td>
<td style="text-align: left;">Include errors in the output (note that this implies that errors executing code will not halt processing of the document).</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>include</strong></td>
<td style="text-align: left;">Catch all for preventing any output (code or results) from being included (e.g. include: false suppresses all output from the code block).</td>
</tr>
</tbody>
</table>
<p><em>Also, your chunks with echo=T, if the code-copy is true in this file, will have a copy to clipboard button.</em></p>
</section>
<section id="deploy-the-changes" class="level2">
<h2>Deploy the changes</h2>
<p>The changes can be deployed to the online blog <a href="https://ipese-web.epfl.ch/climact/">here</a> To achieve this you need to push a commit to gitlab with a tag, which can be achieved with a a Git client like Fork or GitAhead, in the terminal or with the Gitlab IDE. To have a tutorial that works in all installations, here is a tutorials to do this with VS Code which is the recommended software to work on this project:</p>
<section id="vscode" class="level3">
<h3>VSCode</h3>
<ol type="1">
<li><p>In the sidebar on the left, go to the git menu:</p>
<p><img src="images/git-icon.png" class="img-fluid" /></p></li>
<li><p>Here you can find a list of files you have changed or added. Click on the plus icon next to changes to stage all files or add one by one.</p>
<p><img src="images/stage-icon.png" class="img-fluid" /></p></li>
<li><p>Write a short message that represents the changes you have made.</p></li>
<li><p>Click on the arrow next to Commit and choose “Commit &amp; Push”</p>
<p><img src="images/commit-and-push-icon.png" class="img-fluid" /></p></li>
</ol>
<div id="quarto-navigation-envelope" class="hidden">
<p><span class="hidden" data-render-id="quarto-int-sidebar-title">Create a new blog post</span> <span class="hidden" data-render-id="quarto-int-navbar-title">Create a new blog post</span> <span class="hidden" data-render-id="quarto-int-navbar:Home">Home</span> <span class="hidden" data-render-id="quarto-int-navbar:/index.html">/index.html</span> <span class="hidden" data-render-id="quarto-int-navbar:About">About</span> <span class="hidden" data-render-id="quarto-int-navbar:/about.html">/about.html</span></p>
</div>
<div id="quarto-meta-markdown" class="hidden">
<p><span class="hidden" data-render-id="quarto-metatitle">Create a new blog post</span> <span class="hidden" data-render-id="quarto-twittercardtitle">Create a new blog post</span> <span class="hidden" data-render-id="quarto-ogcardtitle">Create a new blog post</span> <span class="hidden" data-render-id="quarto-twittercarddesc">Tutorial how to create a new post on a quarto blog</span> <span class="hidden" data-render-id="quarto-ogcardddesc">Tutorial how to create a new post on a quarto blog</span></p>
</div>
</section>
</section>
</section>

</main> <!-- /main -->
<script id = "quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->

</body>

</html>